<!-- Tabs at the top -->
<button
  class="px-4 py-2 rounded-t-xl bg-gray-800 text-gray-300 hover:bg-gray-600"
  [ngClass]="{ 'bg-cyan-600 text-white': activeTab === 'details' }"
  (click)="goToDetails()"
>
  Details
</button>

<button
  class="px-4 py-2 rounded-t-xl bg-gray-800 text-gray-300 hover:bg-gray-600"
  [ngClass]="{ 'bg-cyan-600 text-white': activeTab === 'contacts' }"
  (click)="goToContacts()"
>
  Contact Persons
</button>

<button
  class="px-4 py-2 rounded-t-xl bg-gray-800 text-gray-300 hover:bg-gray-600"
  [ngClass]="{ 'bg-cyan-600 text-white': activeTab === 'orders' }"
  (click)="goToOrders()"
>
  orders
</button>  

<div class="flex items-center justify-between bg-gray-800  rounded-tr-xl p-2 ">
    <!-- Left side: Titel -->
    <h2 class="text-3xl font-bold text-cyan-50">Contact persons</h2>
    <!--Button: Add a new customer -->
    <button (click)="openAddcontactPerson()"
        class="bg-gray bg-gray-700 text-white px-4 py-2 rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-cyan-400">Add
        a new contact person</button>
    <!-- Right side: Searchfield + Dropdown -->
    <div class="flex space-x-4">
        <!-- Searchfield -->
        <input type="text" placeholder="Search... "
            class="px-3 py-2 rounded-md bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" />

    </div>
</div>

<div *ngIf="loading">Lade Kontaktpersonen...</div>

<ul *ngIf="!loading && contactPersons.length > 0; else noContacts">
  <li
    *ngFor="let c of contactPersons"
    class="py-3 px-4 border border-cyan-600 rounded-xl mt-2 bg-gray-100 flex justify-between items-start"
  >
    <div class="flex flex-col space-y-1">
      <!-- Name -->
      <div>
        <label class="font-semibold">Name:</label>
        <span *ngIf="editingContactId !== c.id">{{ c.contactName }}</span>
        <input
          *ngIf="editingContactId === c.id"
          [(ngModel)]="editCache.contactName"
          class="border border-gray-400 rounded px-2 py-1 ml-2"
        />
      </div>

      <!-- Employment Type -->
      <div>
        <label class="font-semibold">Type:</label>
        <span *ngIf="editingContactId !== c.id">{{ c.employmentType }}</span>
        <input
          *ngIf="editingContactId === c.id"
          [(ngModel)]="editCache.employmentType"
          class="border border-gray-400 rounded px-2 py-1 ml-2"
        />
      </div>

      <!-- Email -->
      <div>
        <label class="font-semibold">Email:</label>
        <span *ngIf="editingContactId !== c.id">{{ c.email }}</span>
        <input
          *ngIf="editingContactId === c.id"
          [(ngModel)]="editCache.email"
          class="border border-gray-400 rounded px-2 py-1 ml-2"
        />
      </div>

      <!-- Phone -->
      <div>
        <label class="font-semibold">Phone:</label>
        <span *ngIf="editingContactId !== c.id">{{ c.phone }}</span>
        <input
          *ngIf="editingContactId === c.id"
          [(ngModel)]="editCache.phone"
          class="border border-gray-400 rounded px-2 py-1 ml-2"
        />
      </div>
    </div>

    <!-- Buttons -->
    <div class="flex flex-col space-y-2 ml-4">
      <!-- Edit -->
      <button
        *ngIf="editingContactId !== c.id"
        (click)="startEditing(c)"
        class="bg-blue-600 text-white px-3 py-1 rounded-md hover:bg-blue-500"
      >
        Edit
      </button>

      <!-- Save / Cancel / Delete -->
      <div *ngIf="editingContactId === c.id" class="flex flex-col space-y-2">
        <button
          (click)="saveEdit(c)"
          class="bg-green-600 text-white px-3 py-1 rounded-md hover:bg-green-500"
        >
          Save
        </button>
        <button
          (click)="cancelEdit()"
          class="bg-gray-400 text-white px-3 py-1 rounded-md hover:bg-gray-500"
        >
          Cancel
        </button>
        <button
          (click)="deleteContactPerson(c)"
          class="bg-red-600 text-white px-3 py-1 rounded-md hover:bg-red-500"
        >
          Delete
        </button>
      </div>
    </div>
  </li>
</ul>


<ng-template #noContacts>
  <p>Keine Kontaktpersonen vorhanden.</p>
</ng-template>